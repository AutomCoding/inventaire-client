#!/usr/bin/env zsh

echo -e '\e[0;30mupdating i18n\e[0m'
./scripts/build_i18n
# should run before brunch build
./scripts/update_languages_stats

echo -e '\e[0;30mbrunch build --production\e[0m'
brunch build --production
./scripts/build_index

echo -e '\e[0;30mgzip js and css files\e[0m'
source ./scripts/init_gzip_utils
gzipkeepall public/js
gzipkeepall public/js/moment
gzipkeepall public/json
gzipkeepall public/css

echo -e '\e[0;30mgzip index.html\e[0m'
gzipkeep public/index.html
echo -e '\e[0;30mgzip robots.txt\e[0m'
gzipkeep public/robots.txt

./scripts/weight_watcher
